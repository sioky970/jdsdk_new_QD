# æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

æœ¬ç›®å½•åŒ…å«JDä»»åŠ¡å¹³å°çš„æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

### `initialize.ps1` - è‡ªåŠ¨åˆå§‹åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰
ä¸€é”®åˆå§‹åŒ–æ‰€æœ‰åŸºç¡€æ•°æ®çš„PowerShellè„šæœ¬ã€‚

**ä½¿ç”¨æ–¹æ³•ï¼š**
```powershell
# åŸºæœ¬ä½¿ç”¨
cd d:\å·¥ç¨‹\jd-task-platform-go\scripts
.\initialize.ps1

# å¼ºåˆ¶é‡æ–°åˆå§‹åŒ–ï¼ˆä¼šæ¸…ç©ºç°æœ‰æ•°æ®ï¼‰
.\initialize.ps1 -Force
```

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… è‡ªåŠ¨æ£€æŸ¥Dockerå®¹å™¨çŠ¶æ€
- âœ… åˆå§‹åŒ–6ç§é¢„è®¾ä»»åŠ¡ç±»å‹
- âœ… åˆå§‹åŒ–ç³»ç»Ÿé…ç½®å‚æ•°
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„åˆå§‹åŒ–ç»“æœæ‘˜è¦
- âœ… æ™ºèƒ½è·³è¿‡å·²å­˜åœ¨çš„æ•°æ®ï¼ˆé™¤éä½¿ç”¨ `-Force`ï¼‰

---

### `init_task_types.sql` - ä»»åŠ¡ç±»å‹åˆå§‹åŒ–
åˆå§‹åŒ–6ç§é¢„è®¾ä»»åŠ¡ç±»å‹åŠå…¶é…ç½®ã€‚

**åŒ…å«çš„ä»»åŠ¡ç±»å‹ï¼š**
1. **æµè§ˆä»»åŠ¡** - 2äº¬è±†
2. **å…³é”®è¯æœç´¢æµè§ˆä»»åŠ¡** - 3äº¬è±†
3. **åŠ å…¥è´­ç‰©è½¦ä»»åŠ¡** - 5äº¬è±†
4. **å…³æ³¨åº—é“ºä»»åŠ¡** - 4äº¬è±†
5. **æ”¶è—å•†å“ä»»åŠ¡** - 4äº¬è±†
6. **è´­ä¹°å•†å“ä»»åŠ¡** - 10äº¬è±†

**æ‰‹åŠ¨æ‰§è¡Œï¼š**
```bash
# å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨
docker cp init_task_types.sql jd-task-mysql:/tmp/

# æ‰§è¡ŒSQLè„šæœ¬
docker exec -it jd-task-mysql mysql -uroot -p123456 jd -e "source /tmp/init_task_types.sql"
```

---

### `init_data.sql` - ç³»ç»Ÿè®¾ç½®åˆå§‹åŒ–
åˆå§‹åŒ–ç³»ç»Ÿé…ç½®å‚æ•°ã€‚

**åŒ…å«çš„ç³»ç»Ÿè®¾ç½®ï¼š**
- `login_announcement` - ç™»å½•é¡µå…¬å‘Š
- `system_name` - ç³»ç»Ÿåç§°
- `default_jingdou` - æ–°ç”¨æˆ·é»˜è®¤äº¬è±†æ•°ï¼ˆ100ï¼‰
- `min_jingdou_balance` - æœ€ä½äº¬è±†ä½™é¢ï¼ˆ0ï¼‰
- `task_create_time_start` - ä»»åŠ¡åˆ›å»ºæ—¶é—´æ®µå¼€å§‹ï¼ˆ08:00ï¼‰
- `task_create_time_end` - ä»»åŠ¡åˆ›å»ºæ—¶é—´æ®µç»“æŸï¼ˆ22:00ï¼‰
- `max_tasks_per_day` - æ¯æ—¥æœ€å¤§ä»»åŠ¡æ•°ï¼ˆ50ï¼‰

**æ‰‹åŠ¨æ‰§è¡Œï¼š**
```bash
# å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨
docker cp init_data.sql jd-task-mysql:/tmp/

# æ‰§è¡ŒSQLè„šæœ¬
docker exec -it jd-task-mysql mysql -uroot -p123456 jd -e "source /tmp/init_data.sql"
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ¬¡éƒ¨ç½²æ—¶çš„å®Œæ•´æµç¨‹ï¼š

1. **å¯åŠ¨æ•°æ®åº“**
   ```powershell
   cd d:\å·¥ç¨‹\jd-task-platform-go\deploy\database
   docker-compose up -d
   ```

2. **ç­‰å¾…MySQLå¯åŠ¨å®Œæˆ**ï¼ˆçº¦10-15ç§’ï¼‰
   ```powershell
   docker logs jd-task-mysql
   ```

3. **è¿è¡Œåˆå§‹åŒ–è„šæœ¬**
   ```powershell
   cd d:\å·¥ç¨‹\jd-task-platform-go\scripts
   .\initialize.ps1
   ```

4. **å¯åŠ¨åç«¯æœåŠ¡**
   ```powershell
   cd d:\å·¥ç¨‹\jd-task-platform-go
   go run main.go
   ```

---

## ğŸ“Š éªŒè¯æ•°æ®

### æ£€æŸ¥ä»»åŠ¡ç±»å‹
```bash
docker exec -it jd-task-mysql mysql -uroot -p123456 -e "SELECT type_code, type_name, jingdou_price FROM jd.task_types;"
```

### æ£€æŸ¥ç³»ç»Ÿè®¾ç½®
```bash
docker exec -it jd-task-mysql mysql -uroot -p123456 -e "SELECT param_key, param_value FROM jd.settings;"
```

### æ£€æŸ¥ç”¨æˆ·ç»Ÿè®¡
```bash
docker exec -it jd-task-mysql mysql -uroot -p123456 -e "SELECT role, COUNT(*) as count FROM jd.users GROUP BY role;"
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®æŒä¹…åŒ–**ï¼šDockerå·²é…ç½®å‘½åå·ï¼Œæ•°æ®ä¼šæŒä¹…åŒ–ä¿å­˜
2. **ç®¡ç†å‘˜è´¦æˆ·**ï¼šé¦–æ¬¡å¯åŠ¨åç«¯æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼ˆadmin/admin123ï¼‰
3. **æ—¶é—´æ®µé™åˆ¶**ï¼šä»»åŠ¡ç±»å‹éƒ½é¢„è®¾äº†ä¸¤ä¸ªæ—¶é—´æ®µï¼ˆ08:00-12:00 å’Œ 14:00-18:00ï¼‰ï¼Œç®¡ç†å‘˜ä¸å—æ­¤é™åˆ¶
4. **ç³»ç»Ÿé¢„è®¾æ ‡è®°**ï¼šæ‰€æœ‰åˆå§‹ä»»åŠ¡ç±»å‹éƒ½æ ‡è®°ä¸ºç³»ç»Ÿé¢„è®¾ï¼ˆ`is_system_preset=1`ï¼‰ï¼Œå»ºè®®ä¸è¦åˆ é™¤

---

## ğŸ”„ é‡æ–°åˆå§‹åŒ–

å¦‚æœéœ€è¦é‡ç½®æ•°æ®åº“åˆ°åˆå§‹çŠ¶æ€ï¼š

```powershell
# ä½¿ç”¨ -Force å‚æ•°å¼ºåˆ¶é‡æ–°åˆå§‹åŒ–
.\initialize.ps1 -Force
```

**è­¦å‘Š**ï¼šä½¿ç”¨ `-Force` ä¼šæ¸…ç©ºå¹¶é‡æ–°åˆ›å»ºæ‰€æœ‰ä»»åŠ¡ç±»å‹æ•°æ®ï¼

---

## ğŸ“ è‡ªå®šä¹‰é…ç½®

å¦‚éœ€ä¿®æ”¹é»˜è®¤å€¼ï¼Œç¼–è¾‘å¯¹åº”çš„SQLæ–‡ä»¶ï¼š

- ä¿®æ”¹ä»»åŠ¡ç±»å‹ä»·æ ¼ï¼šç¼–è¾‘ `init_task_types.sql`
- ä¿®æ”¹ç³»ç»Ÿè®¾ç½®ï¼šç¼–è¾‘ `init_data.sql`

ä¿®æ”¹åé‡æ–°è¿è¡Œ `initialize.ps1 -Force` å³å¯åº”ç”¨æ›´æ”¹ã€‚
